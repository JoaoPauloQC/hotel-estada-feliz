<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Editar H√≥spede ‚Äî Hotel Estada</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='admin.css') }}">
</head>

<body>
  <div class="admin__container">
    
    <!-- Header -->
    <header class="admin__header">
      <h1 class="admin__title">üè® Painel Administrativo</h1>
      <nav class="admin__nav">
        <a href="{{ url_for('admin_dashboard') }}" class="admin__nav-link">Dashboard</a>
        <a href="{{ url_for('admin_reservas') }}" class="admin__nav-link">Reservas</a>
        <a href="{{ url_for('admin_quartos') }}" class="admin__nav-link">Quartos</a>
        <a href="{{ url_for('admin_hospedes') }}" class="admin__nav-link admin__nav-link--active">H√≥spedes</a>
        <a href="{{ url_for('admin_tipos_quarto') }}" class="admin__nav-link">Tipos</a>
        <a href="{{ url_for('logout') }}" class="admin__nav-link">Sair</a>
      </nav>
    </header>

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="flash__container">
          {% for category, message in messages %}
            <div class="flash flash--{{ category }}">
              {{ message }}
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <!-- Formul√°rio -->
    <div class="admin__card">
      <div class="admin__card-header">
        <h2 class="admin__card-title">‚úèÔ∏è Editar H√≥spede #{{ hospede.id_hospede }}</h2>
      </div>

      <form class="admin__form" method="POST">
        
        <div class="admin__form-row">
          <div class="admin__field">
            <label class="admin__label" for="nome_completo">Nome Completo *</label>
            <input 
              class="admin__input" 
              type="text" 
              id="nome_completo" 
              name="nome_completo"
              value="{{ hospede.nome_completo }}"
              required
            />
          </div>

          <div class="admin__field">
            <label class="admin__label">Documento (CPF/RG)</label>
            <input 
              class="admin__input" 
              type="text" 
              value="{{ hospede.documento }}"
              disabled
              style="opacity: 0.6; cursor: not-allowed;"
            />
            <small style="color: var(--muted); font-size: 12px;">
              O documento n√£o pode ser alterado
            </small>
          </div>
        </div>

        <div class="admin__form-row">
          <div class="admin__field">
            <label class="admin__label" for="email">Email</label>
            <input 
              class="admin__input" 
              type="email" 
              id="email" 
              name="email"
              value="{{ hospede.email or '' }}"
            />
          </div>

          <div class="admin__field">
            <label class="admin__label" for="telefone">Telefone</label>
            <input 
              class="admin__input" 
              type="tel" 
              id="telefone" 
              name="telefone"
              value="{{ hospede.telefone or '' }}"
            />
          </div>
        </div>

        <div class="admin__field">
          <label class="admin__label" for="id_usuario_sistema">Vincular a Usu√°rio do Sistema (opcional)</label>
          <select class="admin__select" id="id_usuario_sistema" name="id_usuario_sistema">
            <option value="">-- Nenhum (n√£o vincular) --</option>
            {% for usuario in usuarios %}
              <option value="{{ usuario.id }}" 
                      {% if hospede.id_usuario_sistema == usuario.id %}selected{% endif %}>
                {{ usuario.nome_completo }} ({{ usuario.email }})
                {% if usuario.perfil_id %}
                  {% for perfil in perfis %}
                    {% if perfil.id == usuario.perfil_id %}
                      - [{{ perfil.nome_perfil }}]
                    {% endif %}
                  {% endfor %}
                {% endif %}
              </option>
            {% endfor %}
          </select>
          <small style="color: var(--muted); font-size: 12px; margin-top: 4px;">
            üí° Vincule este h√≥spede a um usu√°rio para permitir que ele fa√ßa login no sistema
          </small>
        </div>

        <div class="admin__form-actions">
          <button type="submit" class="admin__btn admin__btn--primary">
            Salvar Altera√ß√µes
          </button>
          <a href="{{ url_for('admin_hospedes') }}" class="admin__btn admin__btn--secondary">
            Cancelar
          </a>
        </div>

      </form>
    </div>

  </div>
</body>
</html>